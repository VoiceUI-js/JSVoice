"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_ssr_src_engines_LocalTransformersSpeechEngine_js";
exports.ids = ["_ssr_src_engines_LocalTransformersSpeechEngine_js"];
exports.modules = {

/***/ "(ssr)/../src/engines/LocalTransformersSpeechEngine.js":
/*!*******************************************************!*\
  !*** ../src/engines/LocalTransformersSpeechEngine.js ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _BaseSpeechEngine_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./BaseSpeechEngine.js */ \"(ssr)/../src/engines/BaseSpeechEngine.js\");\n/* harmony import */ var _modules_MicrophoneManager_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../modules/MicrophoneManager.js */ \"(ssr)/../src/modules/MicrophoneManager.js\");\n\n\nclass LocalTransformersSpeechEngine extends _BaseSpeechEngine_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n    constructor(options = {}){\n        super(options);\n        this.worker = null;\n        this.audioContext = null;\n        this.mediaStreamSource = null;\n        this.processor = null;\n        this.audioChunks = [];\n        this.isProcessing = false;\n        this.options = {\n            model: \"Xenova/whisper-tiny.en\",\n            modelStrategy: \"auto\",\n            device: \"webgpu\",\n            captureSampleRate: 16000,\n            maxRecordMs: 15000,\n            ...options\n        };\n        if (true) return;\n        this._initStrategy();\n    }\n    async _initStrategy() {\n        if (this.options.modelStrategy === \"auto\") {\n            // Simple heuristic detection\n            const hasWebGPU = navigator.gpu;\n            const isMobile = navigator.userAgent.includes(\"Mobile\");\n            if (hasWebGPU && !isMobile) {\n                console.log(\"[LocalEngine] WebGPU desktop detected. Upgrading to Base model.\");\n                this.options.model = \"Xenova/whisper-base.en\";\n            } else {\n                console.log(\"[LocalEngine] Mobile or no WebGPU. Accessing Tiny model.\");\n                this.options.model = \"Xenova/whisper-tiny.en\";\n            }\n        } else if (this.options.modelStrategy === \"accurate\") {\n            this.options.model = \"Xenova/whisper-base.en\";\n        }\n        this._setupWorker();\n    }\n    _setupWorker() {\n        this.worker = new Worker(new URL(/* worker import */ __webpack_require__.p + __webpack_require__.u(\"crypto-fs-os-path-perf_hooks-url-util-worker_threads-_ssr_src_workers_local-asr_worker_js\"), __webpack_require__.b), {\n            type: undefined\n        });\n        this.worker.onmessage = (e)=>{\n            const { type, data, status, transcript, error, isFinal } = e.data;\n            this._emitTelemetry({\n                type: \"worker_msg\",\n                msgType: type\n            });\n            switch(type){\n                case \"status\":\n                    break;\n                case \"progress\":\n                    if (this.onModelLoadProgress) {\n                        this.onModelLoadProgress(data);\n                        this._emitTelemetry({\n                            type: \"model_download_progress\",\n                            progress: data.progress,\n                            file: data.file\n                        });\n                    }\n                    break;\n                case \"result\":\n                    if (transcript) {\n                        this.onResult(transcript, isFinal || true);\n                    }\n                    this._finishProcessing();\n                    break;\n                case \"error\":\n                    this.onError({\n                        error: \"LocalEngineError\",\n                        message: error\n                    });\n                    this._finishProcessing();\n                    break;\n            }\n        };\n        this.worker.postMessage({\n            type: \"init\",\n            data: {\n                model: this.options.model\n            }\n        });\n    }\n    async start() {\n        if (this.isListening) return;\n        try {\n            // Ref-Counted Acquire\n            const stream = await _modules_MicrophoneManager_js__WEBPACK_IMPORTED_MODULE_1__.microphoneManager.acquire(\"local-engine\", {\n                audio: {\n                    sampleRate: this.options.captureSampleRate\n                }\n            });\n            this.state = \"listening\";\n            this.setState(\"listening\");\n            this.isListening = true;\n            this.audioChunks = [];\n            this.audioContext = new (window.AudioContext || window.webkitAudioContext)({\n                sampleRate: this.options.captureSampleRate\n            });\n            this.mediaStreamSource = this.audioContext.createMediaStreamSource(stream);\n            this.processor = this.audioContext.createScriptProcessor(4096, 1, 1);\n            this.processor.onaudioprocess = (e)=>{\n                if (!this.isListening) return;\n                const inputData = e.inputBuffer.getChannelData(0);\n                this.audioChunks.push(new Float32Array(inputData));\n            // Max Duration Guard\n            // (Simplified: assuming ~4096 samples at 16k is ~0.25s per chunk)\n            // Better to track time.\n            };\n            this.mediaStreamSource.connect(this.processor);\n            this.processor.connect(this.audioContext.destination);\n            this.onStart();\n            // Budget Timer\n            if (this.options.maxRecordMs > 0) {\n                this._budgetTimer = setTimeout(()=>{\n                    console.log(\"[LocalEngine] Max duration reached.\");\n                    this.stop();\n                }, this.options.maxRecordMs);\n            }\n        } catch (err) {\n            console.error(\"[LocalEngine] Start error:\", err);\n            this.onError(err);\n        }\n    }\n    async stop() {\n        if (this._budgetTimer) clearTimeout(this._budgetTimer);\n        if (!this.isListening) return;\n        this.isListening = false;\n        this.setState(\"processing\");\n        this.isProcessing = true;\n        this._cleanupAudioNodes();\n        // Release Mic Immediately\n        _modules_MicrophoneManager_js__WEBPACK_IMPORTED_MODULE_1__.microphoneManager.release(\"local-engine\");\n        // Process\n        const totalLength = this.audioChunks.reduce((acc, chunk)=>acc + chunk.length, 0);\n        const fullBuffer = new Float32Array(totalLength);\n        let offset = 0;\n        for (const chunk of this.audioChunks){\n            fullBuffer.set(chunk, offset);\n            offset += chunk.length;\n        }\n        if (totalLength === 0) {\n            this._finishProcessing();\n            return;\n        }\n        this.worker.postMessage({\n            type: \"process\",\n            data: fullBuffer\n        });\n    }\n    _finishProcessing() {\n        this.isProcessing = false;\n        this.setState(\"idle\");\n        this.onEnd(); // Only emit end after processing done\n    }\n    _cleanupAudioNodes() {\n        if (this.processor) {\n            this.processor.disconnect();\n            this.processor = null;\n        }\n        if (this.mediaStreamSource) {\n            this.mediaStreamSource.disconnect();\n            this.mediaStreamSource = null;\n        }\n        if (this.audioContext) {\n            this.audioContext.close();\n            this.audioContext = null;\n        }\n    }\n    abort() {\n        // Hard Stop\n        this.isListening = false;\n        if (this._budgetTimer) clearTimeout(this._budgetTimer);\n        this._cleanupAudioNodes();\n        _modules_MicrophoneManager_js__WEBPACK_IMPORTED_MODULE_1__.microphoneManager.release(\"local-engine\");\n        this.setState(\"idle\");\n    }\n    _emitTelemetry(e) {\n        if (this.options.onTelemetry) this.options.onTelemetry(e);\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (LocalTransformersSpeechEngine);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vc3JjL2VuZ2luZXMvTG9jYWxUcmFuc2Zvcm1lcnNTcGVlY2hFbmdpbmUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXFEO0FBQ2U7QUFFcEUsTUFBTUUsc0NBQXNDRiw0REFBZ0JBO0lBQ3hERyxZQUFZQyxVQUFVLENBQUMsQ0FBQyxDQUFFO1FBQ3RCLEtBQUssQ0FBQ0E7UUFFTixJQUFJLENBQUNDLE1BQU0sR0FBRztRQUNkLElBQUksQ0FBQ0MsWUFBWSxHQUFHO1FBQ3BCLElBQUksQ0FBQ0MsaUJBQWlCLEdBQUc7UUFDekIsSUFBSSxDQUFDQyxTQUFTLEdBQUc7UUFDakIsSUFBSSxDQUFDQyxXQUFXLEdBQUcsRUFBRTtRQUNyQixJQUFJLENBQUNDLFlBQVksR0FBRztRQUVwQixJQUFJLENBQUNOLE9BQU8sR0FBRztZQUNYTyxPQUFPO1lBQ1BDLGVBQWU7WUFDZkMsUUFBUTtZQUNSQyxtQkFBbUI7WUFDbkJDLGFBQWE7WUFDYixHQUFHWCxPQUFPO1FBQ2Q7UUFFQSxJQUFJLElBQWtCLEVBQWE7UUFDbkMsSUFBSSxDQUFDWSxhQUFhO0lBQ3RCO0lBRUEsTUFBTUEsZ0JBQWdCO1FBQ2xCLElBQUksSUFBSSxDQUFDWixPQUFPLENBQUNRLGFBQWEsS0FBSyxRQUFRO1lBQ3ZDLDZCQUE2QjtZQUM3QixNQUFNSyxZQUFZQyxVQUFVQyxHQUFHO1lBQy9CLE1BQU1DLFdBQVdGLFVBQVVHLFNBQVMsQ0FBQ0MsUUFBUSxDQUFDO1lBRTlDLElBQUlMLGFBQWEsQ0FBQ0csVUFBVTtnQkFDeEJHLFFBQVFDLEdBQUcsQ0FBQztnQkFDWixJQUFJLENBQUNwQixPQUFPLENBQUNPLEtBQUssR0FBRztZQUN6QixPQUFPO2dCQUNIWSxRQUFRQyxHQUFHLENBQUM7Z0JBQ1osSUFBSSxDQUFDcEIsT0FBTyxDQUFDTyxLQUFLLEdBQUc7WUFDekI7UUFDSixPQUFPLElBQUksSUFBSSxDQUFDUCxPQUFPLENBQUNRLGFBQWEsS0FBSyxZQUFZO1lBQ2xELElBQUksQ0FBQ1IsT0FB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U3BlZWNoRW5naW5lLmpzPzBmZmYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJhc2VTcGVlY2hFbmdpbmUgZnJvbSAnLi9CYXNlU3BlZWNoRW5naW5lLmpzJztcclxuaW1wb3J0IHsgbWljcm9waG9uZU1hbmFnZXIgfSBmcm9tICcuLi9tb2R1bGVzL01pY3JvcGhvbmVNYW5hZ2VyLmpzJztcclxuXHJcbmNsYXNzIExvY2FsVHJhbnNmb3JtZXJzU3BlZWNoRW5naW5lIGV4dGVuZHMgQmFzZVNwZWVjaEVuZ2luZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30pIHtcclxuICAgICAgICBzdXBlcihvcHRpb25zKTtcclxuXHJcbiAgICAgICAgdGhpcy53b3JrZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuYXVkaW9Db250ZXh0ID0gbnVsbDtcclxuICAgICAgICB0aGlzLm1lZGlhU3RyZWFtU291cmNlID0gbnVsbDtcclxuICAgICAgICB0aGlzLnByb2Nlc3NvciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5hdWRpb0NodW5rcyA9IFtdO1xyXG4gICAgICAgIHRoaXMuaXNQcm9jZXNzaW5nID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgbW9kZWw6ICdYZW5vdmEvd2hpc3Blci10aW55LmVuJyxcclxuICAgICAgICAgICAgbW9kZWxTdHJhdGVneTogJ2F1dG8nLCAvLyAnYXV0bycgfCAnZmFzdCcgKHRpbnkpIHwgJ2FjY3VyYXRlJyAoYmFzZSlcclxuICAgICAgICAgICAgZGV2aWNlOiAnd2ViZ3B1JyxcclxuICAgICAgICAgICAgY2FwdHVyZVNhbXBsZVJhdGU6IDE2MDAwLFxyXG4gICAgICAgICAgICBtYXhSZWNvcmRNczogMTUwMDAsXHJcbiAgICAgICAgICAgIC4uLm9wdGlvbnNcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybjtcclxuICAgICAgICB0aGlzLl9pbml0U3RyYXRlZ3koKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBfaW5pdFN0cmF0ZWd5KCkge1xyXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMubW9kZWxTdHJhdGVneSA9PT0gJ2F1dG8nKSB7XHJcbiAgICAgICAgICAgIC8vIFNpbXBsZSBoZXVyaXN0aWMgZGV0ZWN0aW9uXHJcbiAgICAgICAgICAgIGNvbnN0IGhhc1dlYkdQVSA9IG5hdmlnYXRvci5ncHU7XHJcbiAgICAgICAgICAgIGNvbnN0IGlzTW9iaWxlID0gbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmNsdWRlcygnTW9iaWxlJyk7XHJcblxyXG4gICAgICAgICAgICBpZiAoaGFzV2ViR1BVICYmICFpc01vYmlsZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tMb2NhbEVuZ2luZV0gV2ViR1BVIGRlc2t0b3AgZGV0ZWN0ZWQuIFVwZ3JhZGluZyB0byBCYXNlIG1vZGVsLicpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLm1vZGVsID0gJ1hlbm92YS93aGlzcGVyLWJhc2UuZW4nO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tMb2NhbEVuZ2luZV0gTW9iaWxlIG9yIG5vIFdlYkdQVS4gQWNjZXNzaW5nIFRpbnkgbW9kZWwuJyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMubW9kZWwgPSAnWGVub3ZhL3doaXNwZXItdGlueS5lbic7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMub3B0aW9ucy5tb2RlbFN0cmF0ZWd5ID09PSAnYWNjdXJhdGUnKSB7XHJcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5tb2RlbCA9ICdYZW5vdmEvd2hpc3Blci1iYXNlLmVuJztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX3NldHVwV29ya2VyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgX3NldHVwV29ya2VyKCkge1xyXG4gICAgICAgIHRoaXMud29ya2VyID0gbmV3IFdvcmtlcihuZXcgVVJMKCcuLi93b3JrZXJzL2xvY2FsLWFzci53b3JrZXIuanMnLCBpbXBvcnQubWV0YS51cmwpLCB7IHR5cGU6ICdtb2R1bGUnIH0pO1xyXG5cclxuICAgICAgICB0aGlzLndvcmtlci5vbm1lc3NhZ2UgPSAoZSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB7IHR5cGUsIGRhdGEsIHN0YXR1cywgdHJhbnNjcmlwdCwgZXJyb3IsIGlzRmluYWwgfSA9IGUuZGF0YTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2VtaXRUZWxlbWV0cnkoeyB0eXBlOiAnd29ya2VyX21zZycsIG1zZ1R5cGU6IHR5cGUgfSk7XHJcblxyXG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ3N0YXR1cyc6XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVhZHlcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ3Byb2dyZXNzJzpcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5vbk1vZGVsTG9hZFByb2dyZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25Nb2RlbExvYWRQcm9ncmVzcyhkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fZW1pdFRlbGVtZXRyeSh7IHR5cGU6ICdtb2RlbF9kb3dubG9hZF9wcm9ncmVzcycsIHByb2dyZXNzOiBkYXRhLnByb2dyZXNzLCBmaWxlOiBkYXRhLmZpbGUgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAncmVzdWx0JzpcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHJhbnNjcmlwdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uUmVzdWx0KHRyYW5zY3JpcHQsIGlzRmluYWwgfHwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2ZpbmlzaFByb2Nlc3NpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2Vycm9yJzpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRXJyb3IoeyBlcnJvcjogJ0xvY2FsRW5naW5lRXJyb3InLCBtZXNzYWdlOiBlcnJvciB9KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9maW5pc2hQcm9jZXNzaW5nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLndvcmtlci5wb3N0TWVzc2FnZSh7XHJcbiAgICAgICAgICAgIHR5cGU6ICdpbml0JyxcclxuICAgICAgICAgICAgZGF0YTogeyBtb2RlbDogdGhpcy5vcHRpb25zLm1vZGVsIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBzdGFydCgpIHtcclxuICAgICAgICBpZiAodGhpcy5pc0xpc3RlbmluZykgcmV0dXJuO1xyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBSZWYtQ291bnRlZCBBY3F1aXJlXHJcbiAgICAgICAgICAgIGNvbnN0IHN0cmVhbSA9IGF3YWl0IG1pY3JvcGhvbmVNYW5hZ2VyLmFjcXVpcmUoJ2xvY2FsLWVuZ2luZScsIHtcclxuICAgICAgICAgICAgICAgIGF1ZGlvOiB7IHNhbXBsZVJhdGU6IHRoaXMub3B0aW9ucy5jYXB0dXJlU2FtcGxlUmF0ZSB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9ICdsaXN0ZW5pbmcnO1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKCdsaXN0ZW5pbmcnKTtcclxuICAgICAgICAgICAgdGhpcy5pc0xpc3RlbmluZyA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuYXVkaW9DaHVua3MgPSBbXTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuYXVkaW9Db250ZXh0ID0gbmV3ICh3aW5kb3cuQXVkaW9Db250ZXh0IHx8IHdpbmRvdy53ZWJraXRBdWRpb0NvbnRleHQpKHtcclxuICAgICAgICAgICAgICAgIHNhbXBsZVJhdGU6IHRoaXMub3B0aW9ucy5jYXB0dXJlU2FtcGxlUmF0ZVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMubWVkaWFTdHJlYW1Tb3VyY2UgPSB0aGlzLmF1ZGlvQ29udGV4dC5jcmVhdGVNZWRpYVN0cmVhbVNvdXJjZShzdHJlYW0pO1xyXG4gICAgICAgICAgICB0aGlzLnByb2Nlc3NvciA9IHRoaXMuYXVkaW9Db250ZXh0LmNyZWF0ZVNjcmlwdFByb2Nlc3Nvcig0MDk2LCAxLCAxKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucHJvY2Vzc29yLm9uYXVkaW9wcm9jZXNzID0gKGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc0xpc3RlbmluZykgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaW5wdXREYXRhID0gZS5pbnB1dEJ1ZmZlci5nZXRDaGFubmVsRGF0YSgwKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYXVkaW9DaHVua3MucHVzaChuZXcgRmxvYXQzMkFycmF5KGlucHV0RGF0YSkpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIE1heCBEdXJhdGlvbiBHdWFyZFxyXG4gICAgICAgICAgICAgICAgLy8gKFNpbXBsaWZpZWQ6IGFzc3VtaW5nIH40MDk2IHNhbXBsZXMgYXQgMTZrIGlzIH4wLjI1cyBwZXIgY2h1bmspXHJcbiAgICAgICAgICAgICAgICAvLyBCZXR0ZXIgdG8gdHJhY2sgdGltZS5cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMubWVkaWFTdHJlYW1Tb3VyY2UuY29ubmVjdCh0aGlzLnByb2Nlc3Nvcik7XHJcbiAgICAgICAgICAgIHRoaXMucHJvY2Vzc29yLmNvbm5lY3QodGhpcy5hdWRpb0NvbnRleHQuZGVzdGluYXRpb24pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5vblN0YXJ0KCk7XHJcblxyXG4gICAgICAgICAgICAvLyBCdWRnZXQgVGltZXJcclxuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5tYXhSZWNvcmRNcyA+IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2J1ZGdldFRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tMb2NhbEVuZ2luZV0gTWF4IGR1cmF0aW9uIHJlYWNoZWQuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdG9wKCk7XHJcbiAgICAgICAgICAgICAgICB9LCB0aGlzLm9wdGlvbnMubWF4UmVjb3JkTXMpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbTG9jYWxFbmdpbmVdIFN0YXJ0IGVycm9yOicsIGVycik7XHJcbiAgICAgICAgICAgIHRoaXMub25FcnJvcihlcnIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBzdG9wKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9idWRnZXRUaW1lcikgY2xlYXJUaW1lb3V0KHRoaXMuX2J1ZGdldFRpbWVyKTtcclxuICAgICAgICBpZiAoIXRoaXMuaXNMaXN0ZW5pbmcpIHJldHVybjtcclxuXHJcbiAgICAgICAgdGhpcy5pc0xpc3RlbmluZyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoJ3Byb2Nlc3NpbmcnKTtcclxuICAgICAgICB0aGlzLmlzUHJvY2Vzc2luZyA9IHRydWU7XHJcblxyXG4gICAgICAgIHRoaXMuX2NsZWFudXBBdWRpb05vZGVzKCk7XHJcblxyXG4gICAgICAgIC8vIFJlbGVhc2UgTWljIEltbWVkaWF0ZWx5XHJcbiAgICAgICAgbWljcm9waG9uZU1hbmFnZXIucmVsZWFzZSgnbG9jYWwtZW5naW5lJyk7XHJcblxyXG4gICAgICAgIC8vIFByb2Nlc3NcclxuICAgICAgICBjb25zdCB0b3RhbExlbmd0aCA9IHRoaXMuYXVkaW9DaHVua3MucmVkdWNlKChhY2MsIGNodW5rKSA9PiBhY2MgKyBjaHVuay5sZW5ndGgsIDApO1xyXG4gICAgICAgIGNvbnN0IGZ1bGxCdWZmZXIgPSBuZXcgRmxvYXQzMkFycmF5KHRvdGFsTGVuZ3RoKTtcclxuICAgICAgICBsZXQgb2Zmc2V0ID0gMDtcclxuICAgICAgICBmb3IgKGNvbnN0IGNodW5rIG9mIHRoaXMuYXVkaW9DaHVua3MpIHtcclxuICAgICAgICAgICAgZnVsbEJ1ZmZlci5zZXQoY2h1bmssIG9mZnNldCk7XHJcbiAgICAgICAgICAgIG9mZnNldCArPSBjaHVuay5sZW5ndGg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodG90YWxMZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5fZmluaXNoUHJvY2Vzc2luZygpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLndvcmtlci5wb3N0TWVzc2FnZSh7XHJcbiAgICAgICAgICAgIHR5cGU6ICdwcm9jZXNzJyxcclxuICAgICAgICAgICAgZGF0YTogZnVsbEJ1ZmZlclxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIF9maW5pc2hQcm9jZXNzaW5nKCkge1xyXG4gICAgICAgIHRoaXMuaXNQcm9jZXNzaW5nID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSgnaWRsZScpO1xyXG4gICAgICAgIHRoaXMub25FbmQoKTsgLy8gT25seSBlbWl0IGVuZCBhZnRlciBwcm9jZXNzaW5nIGRvbmVcclxuICAgIH1cclxuXHJcbiAgICBfY2xlYW51cEF1ZGlvTm9kZXMoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucHJvY2Vzc29yKSB7XHJcbiAgICAgICAgICAgIHRoaXMucHJvY2Vzc29yLmRpc2Nvbm5lY3QoKTtcclxuICAgICAgICAgICAgdGhpcy5wcm9jZXNzb3IgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5tZWRpYVN0cmVhbVNvdXJjZSkge1xyXG4gICAgICAgICAgICB0aGlzLm1lZGlhU3RyZWFtU291cmNlLmRpc2Nvbm5lY3QoKTtcclxuICAgICAgICAgICAgdGhpcy5tZWRpYVN0cmVhbVNvdXJjZSA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmF1ZGlvQ29udGV4dCkge1xyXG4gICAgICAgICAgICB0aGlzLmF1ZGlvQ29udGV4dC5jbG9zZSgpO1xyXG4gICAgICAgICAgICB0aGlzLmF1ZGlvQ29udGV4dCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFib3J0KCkge1xyXG4gICAgICAgIC8vIEhhcmQgU3RvcFxyXG4gICAgICAgIHRoaXMuaXNMaXN0ZW5pbmcgPSBmYWxzZTtcclxuICAgICAgICBpZiAodGhpcy5fYnVkZ2V0VGltZXIpIGNsZWFyVGltZW91dCh0aGlzLl9idWRnZXRUaW1lcik7XHJcbiAgICAgICAgdGhpcy5fY2xlYW51cEF1ZGlvTm9kZXMoKTtcclxuICAgICAgICBtaWNyb3Bob25lTWFuYWdlci5yZWxlYXNlKCdsb2NhbC1lbmdpbmUnKTtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKCdpZGxlJyk7XHJcbiAgICB9XHJcblxyXG4gICAgX2VtaXRUZWxlbWV0cnkoZSkge1xyXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMub25UZWxlbWV0cnkpIHRoaXMub3B0aW9ucy5vblRlbGVtZXRyeShlKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgTG9jYWxUcmFuc2Zvcm1lcnNTcGVlY2hFbmdpbmU7XHJcbiJdLCJuYW1lcyI6WyJCYXNlU3BlZWNoRW5naW5lIiwibWljcm9waG9uZU1hbmFnZXIiLCJMb2NhbFRyYW5zZm9ybWVyc1NwZWVjaEVuZ2luZSIsImNvbnN0cnVjdG9yIiwib3B0aW9ucyIsIndvcmtlciIsImF1ZGlvQ29udGV4dCIsIm1lZGlhU3RyZWFtU291cmNlIiwicHJvY2Vzc29yIiwiYXVkaW9DaHVua3MiLCJpc1Byb2Nlc3NpbmciLCJtb2RlbCIsIm1vZGVsU3RyYXRlZ3kiLCJkZXZpY2UiLCJjYXB0dXJlU2FtcGxlUmF0ZSIsIm1heFJlY29yZE1zIiwiX2luaXRTdHJhdGVneSIsImhhc1dlYkdQVSIsIm5hdmlnYXRvciIsImdwdSIsImlzTW9iaWxlIiwidXNlckFnZW50IiwiaW5jbHVkZXMiLCJjb25zb2xlIiwibG9nIiwiX3NldHVwV29ya2VyIiwiV29ya2VyIiwiVVJMIiwidXJsIiwidHlwZSIsIm9ubWVzc2FnZSIsImUiLCJkYXRhIiwic3RhdHVzIiwidHJhbnNjcmlwdCIsImVycm9yIiwiaXNGaW5hbCIsIl9lbWl0VGVsZW1ldHJ5IiwibXNnVHlwZSIsIm9uTW9kZWxMb2FkUHJvZ3Jlc3MiLCJwcm9ncmVzcyIsImZpbGUiLCJvblJlc3VsdCIsIl9maW5pc2hQcm9jZXNzaW5nIiwib25FcnJvciIsIm1lc3NhZ2UiLCJwb3N0TWVzc2FnZSIsInN0YXJ0IiwiaXNMaXN0ZW5pbmciLCJzdHJlYW0iLCJhY3F1aXJlIiwiYXVkaW8iLCJzYW1wbGVSYXRlIiwic3RhdGUiLCJzZXRTdGF0ZSIsIndpbmRvdyIsIkF1ZGlvQ29udGV4dCIsIndlYmtpdEF1ZGlvQ29udGV4dCIsImNyZWF0ZU1lZGlhU3RyZWFtU291cmNlIiwiY3JlYXRlU2NyaXB0UHJvY2Vzc29yIiwib25hdWRpb3Byb2Nlc3MiLCJpbnB1dERhdGEiLCJpbnB1dEJ1ZmZlciIsImdldENoYW5uZWxEYXRhIiwicHVzaCIsIkZsb2F0MzJBcnJheSIsImNvbm5lY3QiLCJkZXN0aW5hdGlvbiIsIm9uU3RhcnQiLCJfYnVkZ2V0VGltZXIiLCJzZXRUaW1lb3V0Iiwic3RvcCIsImVyciIsImNsZWFyVGltZW91dCIsIl9jbGVhbnVwQXVkaW9Ob2RlcyIsInJlbGVhc2UiLCJ0b3RhbExlbmd0aCIsInJlZHVjZSIsImFjYyIsImNodW5rIiwibGVuZ3RoIiwiZnVsbEJ1ZmZlciIsIm9mZnNldCIsInNldCIsIm9uRW5kIiwiZGlzY29ubmVjdCIsImNsb3NlIiwiYWJvcnQiLCJvblRlbGVtZXRyeSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../src/engines/LocalTransformersSpeechEngine.js\n");

/***/ })

};
;